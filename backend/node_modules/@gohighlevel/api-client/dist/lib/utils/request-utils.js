"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildUrl = buildUrl;
exports.extractParams = extractParams;
exports.getAuthToken = getAuthToken;
function buildUrl(template, pathParams) {
    let url = template;
    for (const [key, value] of Object.entries(pathParams)) {
        url = url.replace(`{${key}}`, encodeURIComponent(String(value)));
    }
    return url;
}
function extractParams(params, paramDefs) {
    const result = { path: {}, query: {}, header: {}, all: {} };
    if (!params)
        return result;
    for (const def of paramDefs) {
        if (def.name === 'Authorization' || def.name === 'Version')
            continue;
        const camelName = def.name.replace(/[-_](\w)/g, (_, c) => c.toUpperCase());
        const value = params[camelName];
        if (value !== undefined) {
            result.all[def.name] = value;
            if (def.in === 'path')
                result.path[def.name] = value;
            else if (def.in === 'query')
                result.query[def.name] = value;
            else if (def.in === 'header')
                result.header[def.name] = String(value);
        }
    }
    return result;
}
async function getAuthToken(client, requirements, headers, query, body, preferredType) {
    if (!requirements.length)
        return null;
    const ghlInstance = client.__ghlInstance;
    if (!ghlInstance?.getTokenForSecurity)
        return null;
    return await ghlInstance.getTokenForSecurity(requirements, headers, query, body, preferredType);
}
//# sourceMappingURL=request-utils.js.map